function push_toggle_all(name){    var all_set = true;    /* this is for use with a sub-grid. To use it pass "true" as third parameter */    if (push_toggle_all.arguments.length > 2 && push_toggle_all.arguments[2] == true)    {        el = eTemplate.getElementsByTagName("input");        for (var i = 0; i < el.length; i++)        {            if (el[i].name.substr(el[i].name.length - 12, el[i].name.length) == '[checkbox][]' && el[i].checked)            {                all_set = false;                break;            }        }        for (var i = 0; i < el.length; i++)        {            if (el[i].name.substr(el[i].name.length - 12, el[i].name.length) == '[checkbox][]')            {                el[i].checked = all_set;            }        }    }    else    {        var checkboxes = document.getElementsByName(name);        for (var i = 0; i < checkboxes.length; i++)        {            if (!checkboxes[i].checked)            {                all_set = false;                break;            }        }        for (var i = 0; i < checkboxes.length; i++)        {            checkboxes[i].checked = !all_set;        }    }}function js_btn_book_selected(){    elmt = '';    el = eTemplate.getElementsByTagName("input");    for (var i = 0; i < el.length; i++)    {        if (el[i].name.substr(el[i].name.length - 12, el[i].name.length) == '[checkbox][]' && el[i].checked)        {            if (elmt.length > 0)            {                elmt += ',';            }            elmt += 'r' + el[i].value;        }    }    if (elmt.length == 0)    {        alert("Aucune case n'a été cochée");        return false;    }    return elmt;}function open_popup(url, width, height) {    var left = parseInt((screen.availWidth / 2) - (width / 2));    var top = parseInt((screen.availHeight / 2) - (height / 2));    var windowFeatures = "width=" + width + ",height=" + height + ",status,resizable,scrollbars=yes,left=" + left + ",top=" + top + "screenX=" + left + ",screenY=" + top;    myWindow = window.open(url, "subWind", windowFeatures);}function ajax_request(link) {    var xhr;    try {        xhr = new ActiveXObject('Msxml2.XMLHTTP');    }    catch (e)    {        try {            xhr = new ActiveXObject('Microsoft.XMLHTTP');        }        catch (e2)        {            try {                xhr = new XMLHttpRequest();            }            catch (e3) {                xhr = false;            }        }    }    xhr.onreadystatechange = function()    {        if (xhr.readyState == 4)        {            if (xhr.status == 200)                document.ajax.dyn = "Received:" + xhr.responseText;            else                document.ajax.dyn = "Error code " + xhr.status;        }    };    xhr.open("GET", link, true);    xhr.send(null);}/** * Show or hide finContrat section * @returns {undefined} */function disable_enable_fin_contrat() {    if ($('#exec\\\[type_contrat\\\]').val() === 'CDI') {        $('.finContrat').hide();    } else {        $('.finContrat').show();    }}/** * check inputs to add a schedule * @param {type} type * @returns {Boolean} */function check_add_horaire(type) {    if (type === 'global') {        if ($('#exec\\\[idasecurite_ville\\\]').val() === '') {            alert("Veuillez choisir une ville.");            return false;        }    }    if (type === 'agent' || type === 'global' || type === 'ville') {        if ($('#exec\\\[idasecurite_site\\\]').val() === '') {            alert("Veuillez choisir un site.");            return false;        }    }    if (type === 'site' || type === 'global' || type === 'ville') {        if ($('#exec\\\[idasecurite_agent\\\]').val() === '') {            alert("Veuillez choisir un agent.");            return false;        }    }    if ($('#exec\\\[heure_arrivee\\\]\\\[str\\\]').val() === '') {        alert("Veuillez indiquer le jour d'arrivée.");        return false;    } else if ($('#exec\\\[heure_depart\\\]\\\[str\\\]').val() === '') {        alert("Veuillez indiquer le jour de depart.");        return false;    } else if ($('#exec\\\[heure_arrivee\\\]\\\[str\\\]').val() === $('#exec\\\[heure_depart\\\]\\\[str\\\]').val()            && $('#exec\\\[heure_arrivee\\\]\\\[H\\\]').val() === $('#exec\\\[heure_depart\\\]\\\[H\\\]').val()            && $('#exec\\\[heure_arrivee\\\]\\\[i\\\]').val() === $('#exec\\\[heure_depart\\\]\\\[i\\\]').val()) {        alert("L'heure d'arrivée doit être différente de l'heure de départ");        return false;    }    return true;}/** * check inputs for change planning operation * @returns {Boolean} */function check_change_planning() {    if ($('#exec\\\[idasecurite_ville\\\]').val() === '') {        alert("Veuillez choisir une ville.");        return false;    } else if ($('#exec\\\[idasecurite_site\\\]').val() === '') {        alert("Veuillez choisir un site.");        return false;    } else if ($('#exec\\\[agent_from\\\]').val() === '') {        alert("Veuillez choisir l'agent donneur.");        return false;    } else if ($('#exec\\\[agent_to\\\]').val() === '') {        alert("Veuillez choisir l'agent receveur.");        return false;    }    if ($('#exec\\\[agent_from\\\]').val() === $('#exec\\\[agent_to\\\]').val()) {        alert("Veuillez choisir deux agents différents.");        return false;    }    return true;}/** * toggle stat section * @returns {undefined} */function changeToggleText() {    if ($('.toggle').html() === 'Afficher les statistiques') {        $('.toggle').html('Cacher les statistiques');    } else if ($('.toggle').html() === 'Cacher les statistiques') {        $('.toggle').html('Afficher les statistiques');    }}/** * Check or unchecked checkboxes * @returns {undefined} */function check_all() {    var checkedLength = $('input[name*="checkbox"]:checked').length;    if (checkedLength != 0) {        $('input[name*="checkbox"]').removeAttr('checked')    } else {        $('input[name*="checkbox"]').attr('checked', true);    }}/** * get checked elements  * @returns {@exp;ids@call;substr|Boolean} */function getChecked() {    var checkedLength = $('input[name*="checkbox"]:checked').length;    if (checkedLength == 0) {        alert("Aucune case n'a été cochée");        return false;    } else {        var ids = '';        $('input[name*="checkbox"]:checked').each(function() {            ids += $(this).attr('value') + '-';        });        return  ids.substr(0, ids.length - 1);    }}/** * highlight for dataTable * @param {type} oTable * @returns {undefined} */function initHighlight(oTable) {    $('td', oTable.fnGetNodes()).hover(function() {        var iCol = $('td').index(this) % 5;        var nTrs = oTable.fnGetNodes();        $('td:nth-child(' + (iCol + 1) + ')', nTrs).addClass('highlighted');    }, function() {        $('td.highlighted', oTable.fnGetNodes()).removeClass('highlighted');    });}/** * Delete an element  * @param {type} id * @param {type} confirmMsg * @param {type} deleteFunction * @param {type} redirectLink * @returns {undefined} */function deleteElement(id, confirmMsg, deleteFunction, redirectLink) {    if (confirm(confirmMsg)) {        $.ajax({            type: "POST",            url: deleteFunction,            data: "id=" + id,            success: function() {                document.location.href = redirectLink + "&msg=" + "La suppression a été effectuée avec succès&save=success";            }        });    }}function loadSitePlanningData(myaction) {    if (!myaction)        myaction = form.action.replace(/.+myaction=/, '');    var mois = $('#exec\\\[mois\\\]').val();    var annee = $('#exec\\\[annee\\\]').val();    var agent = $('#exec\\\[idasecurite_agent\\\]').val();    xajax_doXMLHTTP(myaction, mois, annee, agent);}$(function() {    $(".toggle").click(function() {        $(".stat").fadeToggle("slow");    });    //select the last day at the opening for print    var lastDay = $('#exec\\\[print_to\\\] option:last-child').val();    if($('#exec\\\[print_to\\\]').val() == 1){        $('#exec\\\[print_to\\\]').val(lastDay);    }});